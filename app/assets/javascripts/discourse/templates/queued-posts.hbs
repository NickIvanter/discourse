<div class='container'>
  <div class="row">
    <div class="full-width">
      <ul class="nav nav-pills">
        <li>{{#link-to "queued-posts" (query-params state="new")}}{{i18n "queue.nav.new"}}{{/link-to}}</li>
        <li>{{#link-to "queued-posts" (query-params state="rejected")}}{{i18n "queue.nav.rejected"}}{{/link-to}}</li>
      </ul>
    </div>
  </div>
  <div class="admin-reports-filter">
    <span>{{i18n "queued.filter.date_from"}}{{date-picker-past-settable value=dateFrom defaultDate=dateFrom}}</span>
    <span>{{i18n "queued.filter.date_to"}}{{date-picker-past-settable value=dateTo defaultDate=dateTo}}</span>
  </div>
  {{d-button action="refresh" label="refresh" icon="refresh" disabled=model.refreshing id='refresh-queued'}}
  <div class='queued-posts'>
    {{#each ctrl in model itemController='queued-post'}}
      <div class='queued-post'>
        <div class='poster'>
          {{#user-link user=ctrl.post.user}}
            {{avatar ctrl.post.user imageSize="large"}}
          {{/user-link}}
        </div>
        <div class='cooked'>
          <div class='names'>
            <span class="username">
              {{#user-link user=ctrl.post.user}}
                {{ctrl.post.user.username}}
              {{/user-link}}
              {{#if ctrl.post.user.blocked}}
              <i class='fa fa-ban' title='{{i18n "user.blocked_tooltip"}}'></i>
              {{/if}}
            </span>
          </div>
          <div class='post-info'>
            <span class='post-date'>{{age-with-tooltip ctrl.post.created_at}}</span>
          </div>
          <div class='clearfix'></div>

          <span class='post-title'>
            {{i18n "queue.topic"}}
            {{#if ctrl.post.topic}}
              {{topic-link ctrl.post.topic}}
            {{else}}
              {{ctrl.post.post_options.title}}
            {{/if}}
            {{category-badge ctrl.post.category}}
          </span>

          <div class='body'>
            {{#if ctrl.editing}}
              {{d-editor value=ctrl.buffered.raw}}
            {{else}}
              {{{cook-text ctrl.post.raw}}}
            {{/if}}
          </div>

          <div class='queue-controls'>
            {{#if ctrl.editing}}
              {{d-button action="confirmEdit"
                         label="queue.confirm"
                         disabled=ctrl.post.isSaving
                         class="btn-primary confirm"}}
              {{d-button action="cancelEdit"
                         label="queue.cancel"
                         icon="times"
                         disabled=ctrl.post.isSaving
                         class="btn-danger cancel"}}
            {{else}}
              {{#if showApproveButton}}
                {{d-button action="approve"
                           disabled=ctrl.post.isSaving
                           label="queue.approve"
                           icon="check"
                           class="btn-primary approve"}}
              {{/if}}
              {{#if showRejectButton}}
                {{d-button action="reject"
                           disabled=ctrl.post.isSaving
                           label="queue.reject"
                           icon="times"
                           class="btn-danger reject"}}
              {{/if}}
              {{#if ctrl.post.can_delete_user}}
                {{d-button action="deleteUser"
                           disabled=ctrl.post.isSaving
                           label="queue.delete_user"
                           icon="trash"
                           class="btn-danger delete-user"}}
              {{/if}}
              {{#if showEditButton}}
                {{d-button action="edit"
                           disabled=ctrl.post.isSaving
                           label="queue.edit"
                           icon="pencil"
                           class="edit"}}
              {{/if}}
            {{/if}}
          </div>
        </div>
        <div class='clearfix'></div>
      </div>
    {{else}}
      <p>{{i18n "queue.none"}}</p>
    {{/each}}
  </div>
</div>
